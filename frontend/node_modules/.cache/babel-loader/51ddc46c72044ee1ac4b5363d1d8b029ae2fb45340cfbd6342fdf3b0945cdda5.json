{"ast":null,"code":"import'../styles/Movies.css';import{useEffect,useState}from\"react\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function Movies(){const[dateIsSelected,setDateIsSelected]=useState(false);const[datePickerValue,setDatePickerValue]=useState(null);const[movies,setMovies]=useState([]);useEffect(()=>{const fetchMovies=async()=>{try{const response=await fetch('http://localhost:4000/movies',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({screening_time:datePickerValue})});const data=await response.json();setMovies(data);}catch(error){console.error('Error fetching movies');}};fetchMovies();},[datePickerValue]);const date=new Date();const currentDate=date.toJSON();const currentDateWithoutTime=currentDate.split(\"T\")[0];date.setMonth(date.getMonth()+1);const maxPickerDate=date.toJSON().split(\"T\")[0];const handleChange=e=>{const newDate=e.target.value;if(!newDate||!newDate.trim()){setDateIsSelected(false);}else{setDateIsSelected(true);setDatePickerValue(newDate);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-repertoire\",children:[dateIsSelected?/*#__PURE__*/_jsxs(\"h1\",{className:\"title is-2\",id:\"movie-repertoire-h1\",children:[\"Repertoire For: \",datePickerValue]}):/*#__PURE__*/_jsx(\"h1\",{className:\"title is-2\",id:\"movie-repertoire-h1\",children:\"Select Date To Show Repertoire\"}),/*#__PURE__*/_jsx(\"div\",{className:\"date-picker\",children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"title\",id:\"date-picker\",min:currentDateWithoutTime,max:maxPickerDate,onChange:handleChange})}),dateIsSelected?movies.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"movies-list\",children:movies.map((movie,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"box\",id:\"movies-list-item\",children:[movie.title_,movie.genre,movie.duration_in_minutes,\" min\",movie.format_]},index))}):/*#__PURE__*/_jsx(\"div\",{className:\"tag is-white\",id:\"no-date-selected-info\",children:\"No movies for selected date\"}):/*#__PURE__*/_jsx(\"div\",{className:\"tag is-white\",id:\"no-date-selected-info\",children:\"No date selected\"})]});}export default Movies;","map":{"version":3,"names":["useEffect","useState","jsxs","_jsxs","jsx","_jsx","Movies","dateIsSelected","setDateIsSelected","datePickerValue","setDatePickerValue","movies","setMovies","fetchMovies","response","fetch","method","headers","body","JSON","stringify","screening_time","data","json","error","console","date","Date","currentDate","toJSON","currentDateWithoutTime","split","setMonth","getMonth","maxPickerDate","handleChange","e","newDate","target","value","trim","className","children","id","type","min","max","onChange","length","map","movie","index","title_","genre","duration_in_minutes","format_"],"sources":["C:/Users/Simon/IdeaProjects/movie-theater-ticket-reservation/frontend/src/pages/Movies.jsx"],"sourcesContent":["import '../styles/Movies.css';\r\nimport {useEffect, useState} from \"react\";\r\n\r\nfunction Movies() {\r\n    const [dateIsSelected, setDateIsSelected] = useState(false);\r\n    const [datePickerValue, setDatePickerValue] = useState(null);\r\n    const [movies, setMovies] = useState([]);\r\n    useEffect(() => {\r\n        const fetchMovies = async () => {\r\n            try {\r\n                const response = await fetch('http://localhost:4000/movies', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({ screening_time: datePickerValue }),\r\n                });\r\n                const data = await response.json();\r\n                setMovies(data);\r\n            } catch (error) {\r\n                console.error('Error fetching movies');\r\n            }\r\n        };\r\n        fetchMovies();\r\n    }, [datePickerValue]);\r\n    const date = new Date();\r\n    const currentDate = date.toJSON();\r\n    const currentDateWithoutTime = currentDate.split(\"T\")[0];\r\n    date.setMonth(date.getMonth() + 1);\r\n    const maxPickerDate = date.toJSON().split(\"T\")[0];\r\n    const handleChange = (e) => {\r\n        const newDate = e.target.value;\r\n        if(!newDate || !newDate.trim()) {\r\n            setDateIsSelected(false);\r\n        }\r\n        else {\r\n            setDateIsSelected(true);\r\n            setDatePickerValue(newDate);\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"movie-repertoire\">\r\n            {\r\n                dateIsSelected ? (\r\n                    <h1 className=\"title is-2\" id=\"movie-repertoire-h1\">Repertoire For: {datePickerValue}</h1>\r\n                ) : (\r\n                    <h1 className=\"title is-2\" id=\"movie-repertoire-h1\">Select Date To Show Repertoire</h1>\r\n                )\r\n            }\r\n            <div className=\"date-picker\">\r\n                <input type=\"date\" className=\"title\" id=\"date-picker\" min={currentDateWithoutTime} max={maxPickerDate} onChange={handleChange}></input>\r\n            </div>\r\n            {\r\n                dateIsSelected ? (\r\n                    movies.length > 0 ? (\r\n                        <div className=\"movies-list\">\r\n                            {\r\n                                movies.map((movie, index) => (\r\n                                    <div className=\"box\" id=\"movies-list-item\" key={index}>\r\n                                        {movie.title_}\r\n                                        {movie.genre}\r\n                                        {movie.duration_in_minutes} min\r\n                                        {movie.format_}\r\n                                    </div>\r\n                                ))\r\n                            }\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"tag is-white\" id=\"no-date-selected-info\">No movies for selected date</div>\r\n                    )\r\n                ) : (\r\n                    <div className=\"tag is-white\" id=\"no-date-selected-info\">No date selected</div>\r\n                )\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Movies;"],"mappings":"AAAA,MAAO,sBAAsB,CAC7B,OAAQA,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAE1C,QAAS,CAAAC,MAAMA,CAAA,CAAG,CACd,KAAM,CAACC,cAAc,CAAEC,iBAAiB,CAAC,CAAGP,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACQ,eAAe,CAAEC,kBAAkB,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACU,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACxCD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAa,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,8BAA8B,CAAE,CACzDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,cAAc,CAAEZ,eAAgB,CAAC,CAC5D,CAAC,CAAC,CACF,KAAM,CAAAa,IAAI,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClCX,SAAS,CAACU,IAAI,CAAC,CACnB,CAAE,MAAOE,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAC,CAC1C,CACJ,CAAC,CACDX,WAAW,CAAC,CAAC,CACjB,CAAC,CAAE,CAACJ,eAAe,CAAC,CAAC,CACrB,KAAM,CAAAiB,IAAI,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACvB,KAAM,CAAAC,WAAW,CAAGF,IAAI,CAACG,MAAM,CAAC,CAAC,CACjC,KAAM,CAAAC,sBAAsB,CAAGF,WAAW,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACxDL,IAAI,CAACM,QAAQ,CAACN,IAAI,CAACO,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAC,CAClC,KAAM,CAAAC,aAAa,CAAGR,IAAI,CAACG,MAAM,CAAC,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACjD,KAAM,CAAAI,YAAY,CAAIC,CAAC,EAAK,CACxB,KAAM,CAAAC,OAAO,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAC9B,GAAG,CAACF,OAAO,EAAI,CAACA,OAAO,CAACG,IAAI,CAAC,CAAC,CAAE,CAC5BhC,iBAAiB,CAAC,KAAK,CAAC,CAC5B,CAAC,IACI,CACDA,iBAAiB,CAAC,IAAI,CAAC,CACvBE,kBAAkB,CAAC2B,OAAO,CAAC,CAC/B,CACJ,CAAC,CACD,mBACIlC,KAAA,QAAKsC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,EAEzBnC,cAAc,cACVJ,KAAA,OAAIsC,SAAS,CAAC,YAAY,CAACE,EAAE,CAAC,qBAAqB,CAAAD,QAAA,EAAC,kBAAgB,CAACjC,eAAe,EAAK,CAAC,cAE1FJ,IAAA,OAAIoC,SAAS,CAAC,YAAY,CAACE,EAAE,CAAC,qBAAqB,CAAAD,QAAA,CAAC,gCAA8B,CAAI,CACzF,cAELrC,IAAA,QAAKoC,SAAS,CAAC,aAAa,CAAAC,QAAA,cACxBrC,IAAA,UAAOuC,IAAI,CAAC,MAAM,CAACH,SAAS,CAAC,OAAO,CAACE,EAAE,CAAC,aAAa,CAACE,GAAG,CAAEf,sBAAuB,CAACgB,GAAG,CAAEZ,aAAc,CAACa,QAAQ,CAAEZ,YAAa,CAAQ,CAAC,CACtI,CAAC,CAEF5B,cAAc,CACVI,MAAM,CAACqC,MAAM,CAAG,CAAC,cACb3C,IAAA,QAAKoC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAEpB/B,MAAM,CAACsC,GAAG,CAAC,CAACC,KAAK,CAAEC,KAAK,gBACpBhD,KAAA,QAAKsC,SAAS,CAAC,KAAK,CAACE,EAAE,CAAC,kBAAkB,CAAAD,QAAA,EACrCQ,KAAK,CAACE,MAAM,CACZF,KAAK,CAACG,KAAK,CACXH,KAAK,CAACI,mBAAmB,CAAC,MAC3B,CAACJ,KAAK,CAACK,OAAO,GAJ8BJ,KAK3C,CACR,CAAC,CAEL,CAAC,cAEN9C,IAAA,QAAKoC,SAAS,CAAC,cAAc,CAACE,EAAE,CAAC,uBAAuB,CAAAD,QAAA,CAAC,6BAA2B,CAAK,CAC5F,cAEDrC,IAAA,QAAKoC,SAAS,CAAC,cAAc,CAACE,EAAE,CAAC,uBAAuB,CAAAD,QAAA,CAAC,kBAAgB,CAAK,CACjF,EAEJ,CAAC,CAEd,CAEA,cAAe,CAAApC,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}